# Claude Code Test - Playwright UIデバッグ環境

このプロジェクトは、PlaywrightでUIテストとデバッグを行うための包括的な環境です。シンプルなバイリンガル（日本語/英語）「Hello World」ページを対象として、様々なブラウザとデバイスでのテストを実行できます。

## 🚀 特徴

- **多言語対応**: 日本語と英語に対応したテストページ
- **マルチブラウザテスト**: Chrome, Firefox, Safari, モバイルブラウザでのテスト
- **自動サーバー起動**: テスト実行時に自動的にローカルサーバーを起動
- **包括的なテスト**: ページ読み込み、スタイル、レスポンシブデザイン、アクセシビリティ
- **デバッグツール**: スクリーンショット、ビデオ、トレース、UIモード
- **充実したレポート**: HTML形式の詳細なテスト結果レポート

## 📋 セットアップ

### 依存関係のインストール
```bash
npm install
```

### Playwrightブラウザのインストール
```bash
npx playwright install
```

## 🎯 使用可能なコマンド

### 基本的なテスト実行
```bash
npm test
```
全てのテストを実行します。複数のブラウザ（Chrome、Firefox、Safari、モバイル）で自動的にテストされます。

### UIモードでデバッグ（推奨）
```bash
npm run test:ui
```
Playwrightの専用UIが開き、以下の機能を使用できます：
- テストの実行とステップごとの確認
- タイムトラベルデバッグ
- リアルタイムなDOM検査
- スクリーンショット比較

### デバッグモード
```bash
npm run test:debug
```
テストをステップごとに実行し、ブレークポイントで停止できます。

### ヘッドフルモード（ブラウザを表示）
```bash
npm run test:headed
```
実際のブラウザウィンドウを表示しながらテストを実行します。

### コード生成ツール
```bash
npm run codegen
```
ブラウザ操作を記録して、自動的にテストコードを生成します。

### テストレポート表示
```bash
npm run test:report
```
最後のテスト実行結果のHTMLレポートを表示します。

### トレースビューア
```bash
npm run trace trace.zip
```
テストのトレースファイルを表示します（失敗時に自動生成）。

### ローカルサーバー起動
```bash
npm run serve
```
http://localhost:3000 でindex.htmlを配信します。

## 📁 プロジェクト構成

```
.
├── README.md                    # このファイル
├── index.html                   # テスト対象のHTMLページ（日英バイリンガル）
├── package.json                 # プロジェクト設定と依存関係
├── playwright.config.ts         # Playwright設定（マルチブラウザ、デバッグ設定）
└── tests/
    └── ui-debug.spec.ts         # 包括的なUIテストスイート
```

## 🧪 テストスイート詳細

### 基本機能テスト
- **ページロード**: タイトル、メインコンテナの表示確認
- **テキスト要素**: 見出しと段落の内容・表示確認
- **スタイル**: CSS適用状況、レイアウトの確認
- **レスポンシブデザイン**: デスクトップ、タブレット、モバイルでの表示

### デバッグヘルパー
- **スクリーンショット**: ページ全体と各要素のスクリーンショット自動保存
- **インタラクション録画**: ホバー、スクロール等の操作録画
- **要素情報出力**: サイズ、位置、HTML構造の詳細情報

### 対応ブラウザ・デバイス
- **デスクトップ**: Chrome, Firefox, Safari
- **モバイル**: Chrome (Pixel 5), Safari (iPhone 12)

## 🎨 テスト対象ページ

`index.html`は以下の特徴を持つシンプルなページです：
- グラデーション背景
- 日本語と英語の両方でのメッセージ表示
- レスポンシブデザイン
- モダンなガラスモーフィズム効果

## 🔧 デバッグのヒント

1. **UIモード** (`npm run test:ui`) が最も効率的なデバッグ方法です
2. スクリーンショットは `debug-screenshots/` フォルダに自動保存されます
3. 失敗時は自動的にスクリーンショット、ビデオ、トレースが記録されます
4. テストレポートで詳細な実行結果を確認できます
5. 各ブラウザでのテスト結果を比較して、クロスブラウザ互換性を確認できます

## 🚨 トラブルシューティング

### よくある問題
- **テストが失敗する**: `npx playwright install` でブラウザを再インストール
- **サーバーが起動しない**: ポート3000が使用中の場合は他のサーバーを停止
- **スクリーンショットが保存されない**: `debug-screenshots/` フォルダが自動作成されます

### CI/CD環境での実行
本プロジェクトはCI環境向けに最適化されており、以下の設定が適用されます：
- リトライ回数: 2回
- 並行実行: 1ワーカー
- テストスキップ防止: `forbidOnly` 有効

## 📄 ライセンス

ISC License

## 🤝 貢献

このプロジェクトはPlaywrightのテストパターンとベストプラクティスを学ぶためのものです。改善提案やバグ報告は歓迎します。